<form #productForm="ngForm" (ngSubmit)="insertData()">
  <div class="form-group">
    <label for="category">Catégorie</label>
    <select id="category" name="category_id" [(ngModel)]="product.category_id" required #category="ngModel" class="form-control">
      <option *ngFor="let cat of categories" [value]="cat.id">{{ cat.name }}</option>
    </select>
  
    <div *ngIf="category.invalid && category.touched">
      <div class="alert alert-danger alert-dismissible fade show mt-4" role="alert">
        <small class="error">La catégorie est obligatoire.</small>
      </div>
    </div>
  </div>
  
  <div class="form-group">
    <label for="libelle">Libellé</label>
    <input
      id="libelle"
      name="libelle"
      [(ngModel)]="product.libelle"
      required
      #libelle="ngModel"
      type="text"
      class="text form-control"
    />

    <div *ngIf="libelle.invalid && libelle.touched">       
      <div  class="alert alert-danger alert-dismissible fade show mt-4" role="alert">
          <small class="error">Le libellé est obligatoire.</small>
      </div>
    </div>
  </div>

  <div class="form-group">
    <label for="reference">Référence</label>
    <input
      id="reference"
      name="reference"
      [(ngModel)]="product.reference"
      required
      #reference="ngModel"
      type="text"
      class="text form-control"
    />

    <div *ngIf="reference.invalid && reference.touched">       
      <div  class="alert alert-danger alert-dismissible fade show mt-4" role="alert">
          <small class="error">La référence est obligatoire.</small>
      </div>
    </div>
  </div>

  <div class="form-group">
    <label for="description">Description</label>
    <input
      id="description"
      name="description"
      [(ngModel)]="product.description"
      required
      #description="ngModel"
      type="text"
      class="text form-control"
    />

    <div *ngIf="description.invalid && description.touched">
      <div class="alert alert-danger alert-dismissible fade show mt-4" role="alert">
          <small class="error">La description est obligatoire.</small>
      </div>       
    </div>
  </div>

  <div class="form-group">
    <label for="quantite">Quantité</label>
    <input
      id="quantite"
      name="quantite"
      [(ngModel)]="product.quantite"
      required
      type="number"
      #quantite="ngModel"
      class="text form-control"
    />
    <div *ngIf="quantite.invalid && quantite.touched">        
      <div class="alert alert-danger alert-dismissible fade show mt-4" role="alert">
          <small class="error">La quantité est obligatoire.</small>          
      </div> 
    </div>
  </div>

  <div class="form-group">
    <label for="prix">Prix</label>
    <input
      id="prix"
      name="prix"
      [(ngModel)]="product.prix"
      required
      type="number"
      #prix="ngModel"
      class="text form-control"
    />
    <div *ngIf="prix.invalid && prix.touched">
      <div class="alert alert-danger alert-dismissible fade show mt-4" role="alert">
          <small class="error">Le prix est obligatoire.</small>
      </div>        
    </div>
  </div>

  <div class="form-group">
    <label for="poids">Poids (kg)</label>
    <input
      id="poids"
      name="poids"
      [(ngModel)]="product.poids"
      required
      type="number"
      step="0.01"
      #poids="ngModel"
      class="text form-control"
    />
    <div *ngIf="poids.invalid && poids.touched">
      <div class="alert alert-danger alert-dismissible fade show mt-4" role="alert">
          <small class="error">Le poids est obligatoire.</small>
      </div>        
    </div>
  </div>
  
  
  <!-- Image par défaut -->
  <div class="form-group">
    <label for="defaultImage">Image par défaut</label>
    <input
      type="file"
      id="defaultImage"
      name="defaultImage"
      (change)="onFileChange($event, 'defaultImage')"  
      class="form-control"
    />
    <!-- Affichage de l'image par défaut après sélection -->
    <div *ngIf="defaultImageUrl">
      <p>Image par défaut sélectionnée : {{ defaultImage?.name }}</p>
      <img [src]="defaultImageUrl" alt="Image par défaut" class="thumbnail img-thumbnail img-fluid rounded" />
    </div>
  </div>

  <!-- Autres images -->
  <div class="form-group">
    <label for="otherImages">Autres images</label>
    <input
      type="file"
      id="otherImages"
      name="otherImages"
      (change)="onFileChange($event, 'otherImages')"
      class="form-control"
      multiple
    />
    <!-- Affichage des autres images après sélection -->
    <div *ngIf="otherImagesUrls.length > 0" class="mt-3">
      <p>Autres images sélectionnées :</p>
      <div class="image-gallery">
        <div *ngFor="let imgUrl of otherImagesUrls" class="image-item">
          <img [src]="imgUrl" alt="Autres images" class="thumbnail img-thumbnail img-fluid rounded" />
        </div>
      </div>
    </div>
  </div>
  
  <button class="btn btn-success btn-sm mt-4"><i class="fa fa-check" aria-hidden="true"></i> Valider</button>
</form>