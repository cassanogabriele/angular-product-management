<div *ngIf="cartItems && cartItems.length > 0">
  <table class="table">
    <thead>
      <tr>
        <th></th>
        <th>Produit</th>
        <th>Vendeur</th>
        <th>Quantité</th>
        <th>Prix Unitaire</th>
        <th>Frais de Livraison</th>
        <th>Total</th>
        <th>Action</th>
      </tr>
    </thead>

    <tbody>
      <ng-container *ngFor="let vendorGroup of cartItems">
        <ng-container *ngFor="let item of vendorGroup.items; let i = index">
          <tr>
            <td>
              <img
              [src]="item.defaultImage || 'assets/images/no-image.png'"
              class="rounded"
              style="max-width:100px; height: 100px; object-fit: cover;"
              alt="{{ item.libelle }}"
              />                 
            </td>

            <td>{{ item.libelle }}</td> 

            <td>
              {{ vendorGroup.vendeur.name }} {{ vendorGroup.vendeur.firstname }}
            </td>

            <td>
              <input 
                type="number" 
                [(ngModel)]="item.quantite" 
                min="1" 
                class="form-control" 
                (change)="updateCart(item)"
                [value]="item.quantite"
              />
            </td>

            <!-- Prix unitaire -->
            <td>{{ item.prix }} €</td> 

            <!-- Frais de livraison -->
            <td>{{ item.frais_livraison }} €</td> 

            <!-- Total de l'article -->
            <td>{{ item.total_article }} €</td> 

            <!-- Bouton de suppression -->
            <td>             
              <button class="btn btn-outline-danger btn-sm rounded-circle" (click)="removeFromCart(item.product_id)">
                <i class="fa fa-trash"></i> 
              </button>
            </td>
          </tr>
        </ng-container>
      </ng-container>
    </tbody>
  </table>

  <!-- Résumé du panier -->
  <div class="cart-summary">
    <hr>
    <p><strong>Total du panier:</strong> {{ total }} €</p>
  </div>
</div>

<!-- Message si le panier est vide -->
<div *ngIf="cartItems && cartItems.length === 0">
  <p>Votre panier est vide.</p>
</div>
